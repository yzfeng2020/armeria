{"version":3,"sources":["webpack:///./src/pages/docs/client-circuit-breaker.mdx","webpack:///./src/layouts/docs.tsx"],"names":["pageTitle","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent","DocsLayout","candidateMdxNodes","useStaticQuery","allMdx","nodes","index","docsIndex","prefix","pageTitleSuffix"],"mappings":"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","file":"component---src-pages-docs-client-circuit-breaker-mdx-2ca5462e1c6b3787a815.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/trustin/Workspaces/upstream-armeria/site/src/layouts/docs.tsx\";\nexport const pageTitle = \"Circuit breaker\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  pageTitle,\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <h1 {...{\n      \"id\": \"circuit-breaker\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h1\" {...{\n        \"href\": \"#circuit-breaker\",\n        \"aria-label\": \"circuit breaker permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Circuit breaker`}</h1>\n    <h6 {...{\n      \"className\": \"inlinePageToc\",\n      \"role\": \"navigation\"\n    }}>{`Table of contents`}</h6>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#state-of-circuitbreaker\"\n        }}>{`State of CircuitBreaker`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#circuitbreakerclient\"\n        }}>{`CircuitBreakerClient`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#circuitbreakerrule\"\n        }}>{`CircuitBreakerRule`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#grouping-circuitbreakers\"\n        }}>{`Grouping CircuitBreakers`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#circuitbreakerbuilder\"\n        }}>{`CircuitBreakerBuilder`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#using-circuitbreaker-with-non-armeria-client\"\n        }}>{`Using CircuitBreaker with non-Armeria client`}</a></li>\n    </ul>\n    <p>{`In microservice architecture, it's common that various services running on different machines are connected to\neach other through remote calls. If one of the services becomes unreachable somehow such as due to network\nissues, the client which connects to that service will take long to get a response from it or to fail to\nget one. Situation will get even worse if there are many remote calls to such unresponsive service.\nYou can configure an Armeria client with a circuit breaker to prevent this circumstance. The circuit breaker\ncan automatically detect failures by continuously updating success and failure events. If the remote service\nis unresponsive, it will immediately respond with an error and not make remote calls.\nPlease refer to `}<a parentName=\"p\" {...{\n        \"href\": \"https://martinfowler.com/bliki/CircuitBreaker.html\"\n      }}>{`CircuitBreaker wiki page`}</a>{` by Martin Fowler and\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://engineering.linecorp.com/en/blog/detail/76\"\n      }}>{`LINE Engineering blog post about circuit breaker`}</a>{`\nfor more information.`}</p>\n    <h2 {...{\n      \"id\": \"state-of-circuitbreaker\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#state-of-circuitbreaker\",\n        \"aria-label\": \"state of circuitbreaker permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`State of `}<inlineCode parentName=\"h2\">{`CircuitBreaker`}</inlineCode></h2>\n    <p>{`A `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n      }}>{`type://CircuitBreaker`}</a>{` can be one of the following three states:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`CLOSED`}</inlineCode>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Initial state. All requests are treated normally.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`OPEN`}</inlineCode>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`The state machine enters the `}<inlineCode parentName=\"li\">{`OPEN`}</inlineCode>{` state once the number of failures divided by the total number of\nrequests exceeds a certain threshold. All requests are blocked off responding with `}<a parentName=\"li\" {...{\n              \"href\": \"type://FailFastException:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/FailFastException.html\"\n            }}>{`type://FailFastException`}</a>{`.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`HALF_OPEN`}</inlineCode>{`.`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`After a certain amount of time in the `}<inlineCode parentName=\"li\">{`OPEN`}</inlineCode>{` state, the state machine enters the `}<inlineCode parentName=\"li\">{`HALF_OPEN`}</inlineCode>{` state\nwhich sends a request to find out if the service is still unavailable or not.\nIf the request succeeds, it enters the `}<inlineCode parentName=\"li\">{`CLOSED`}</inlineCode>{` state. If it fails, it enters the `}<inlineCode parentName=\"li\">{`OPEN`}</inlineCode>{` state again.`}</li>\n        </ul>\n      </li>\n    </ul>\n    <span {...{\n      \"className\": \"remark-draw remark-draw-bob-svg\"\n    }}><object parentName=\"span\" {...{\n        \"data\": \"/34ce3e221712a4643e01baaf8dc06b750d701fba.svg\",\n        \"role\": \"img\",\n        \"aria-label\": \"\"\n      }}></object></span>\n    <h2 {...{\n      \"id\": \"circuitbreakerclient\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#circuitbreakerclient\",\n        \"aria-label\": \"circuitbreakerclient permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><inlineCode parentName=\"h2\">{`CircuitBreakerClient`}</inlineCode></h2>\n    <p>{`Armeria provides two different client implementations depending on the\n`}<a parentName=\"p\" {...{\n        \"href\": \"type://Request:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Request.html\"\n      }}>{`type://Request`}</a>{` and `}<a parentName=\"p\" {...{\n        \"href\": \"type://Response:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Response.html\"\n      }}>{`type://Response`}</a>{` types:`}</p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"type://CircuitBreakerClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerClient.html\"\n        }}>{`type://CircuitBreakerClient`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"type://CircuitBreakerRpcClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerRpcClient.html\"\n        }}>{`type://CircuitBreakerRpcClient`}</a></li>\n    </ul>\n    <p>{`Let's use `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreakerClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerClient.html\"\n      }}>{`type://CircuitBreakerClient`}</a>{` to find out what we can do.\nYou can use the `}<inlineCode parentName=\"p\">{`decorator()`}</inlineCode>{` method in `}<a parentName=\"p\" {...{\n        \"href\": \"type://WebClientBuilder:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClientBuilder.html\"\n      }}>{`type://WebClientBuilder`}</a>{` to build a `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreakerClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerClient.html\"\n      }}>{`type://CircuitBreakerClient`}</a>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.client.WebClient;\nimport com.linecorp.armeria.client.circuitbreaker.CircuitBreaker;\nimport com.linecorp.armeria.client.circuitbreaker.CircuitBreakerClient;\nimport com.linecorp.armeria.client.circuitbreaker.CircuitBreakerRule;\nimport com.linecorp.armeria.common.AggregatedHttpResponse;\nimport com.linecorp.armeria.common.HttpRequest;\nimport com.linecorp.armeria.common.HttpResponse;\n\nCircuitBreakerRule rule = CircuitBreakerRule.builder()\n                                            .onServerErrorStatus()\n                                            .onException()\n                                            .thenFailure();\n\nWebClient client = WebClient\n        .builder(...)\n        .decorator(CircuitBreakerClient.builder(rule)\n                                       .newDecorator())\n        .build();\n\nAggregatedHttpResponse res = client.execute(...).aggregate().join(); // Send requests on and on.\n`}</code></pre>\n    <p>{`Now, the `}<a parentName=\"p\" {...{\n        \"href\": \"type://WebClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html\"\n      }}>{`type://WebClient`}</a>{` can track the number of success or failure events depending on the\n`}<a parentName=\"p\" {...{\n        \"href\": \"typeplural://Response:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Response.html\"\n      }}>{`typeplural://Response`}</a>{`. The `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n      }}>{`type://CircuitBreaker`}</a>{` will enter `}<inlineCode parentName=\"p\">{`OPEN`}</inlineCode>{`, when the number of failures divided\nby the total number of `}<a parentName=\"p\" {...{\n        \"href\": \"typeplural://Request:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Request.html\"\n      }}>{`typeplural://Request`}</a>{` exceeds the failure rate.\nThen the `}<a parentName=\"p\" {...{\n        \"href\": \"type://WebClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html\"\n      }}>{`type://WebClient`}</a>{` will immediately get `}<a parentName=\"p\" {...{\n        \"href\": \"type://FailFastException:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/FailFastException.html\"\n      }}>{`type://FailFastException`}</a>{` by the `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n      }}>{`type://CircuitBreaker`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"circuitbreakerrule\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#circuitbreakerrule\",\n        \"aria-label\": \"circuitbreakerrule permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><inlineCode parentName=\"h2\">{`CircuitBreakerRule`}</inlineCode></h2>\n    <p>{`How does a `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n      }}>{`type://CircuitBreaker`}</a>{` know whether a `}<a parentName=\"p\" {...{\n        \"href\": \"type://Response:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Response.html\"\n      }}>{`type://Response`}</a>{` is successful or not?\n`}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreakerRule:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerRule.html\"\n      }}>{`type://CircuitBreakerRule`}</a>{` does the job. In the example above, if the status of a `}<a parentName=\"p\" {...{\n        \"href\": \"type://Response:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Response.html\"\n      }}>{`type://Response`}</a>{` is `}<inlineCode parentName=\"p\">{`5xx`}</inlineCode>{`\nor an `}<inlineCode parentName=\"p\">{`Exception`}</inlineCode>{` is raised during the call, the count of failure is increased.\nYou can have your own `}<inlineCode parentName=\"p\">{`rule`}</inlineCode>{` by building `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreakerRule:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerRule.html\"\n      }}>{`type://CircuitBreakerRule`}</a>{`.\nThe following example builds a `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreakerRule:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerRule.html\"\n      }}>{`type://CircuitBreakerRule`}</a>{` that fails when an `}<inlineCode parentName=\"p\">{`Exception`}</inlineCode>{`\nis raised or the status is `}<inlineCode parentName=\"p\">{`5xx`}</inlineCode>{`, succeeds when the status is `}<inlineCode parentName=\"p\">{`2xx`}</inlineCode>{` and ignores others.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.client.ClientRequestContext;\nimport com.linecorp.armeria.client.UnprocessedRequestException;\nimport com.linecorp.armeria.common.HttpStatus;\nimport com.linecorp.armeria.common.HttpStatusClass;\n\nfinal CircuitBreakerRule myRule = \n        CircuitBreakerRule.of(\n                // A failure if an Exception is raised.\n                CircuitBreakerRule.onException(), \n                // Neither a success nor a failure because the request has not been handled by the server.\n                CircuitBreakerRule.builder()\n                                  .onUnprocessed()\n                                  .thenIgnore(),\n                // A failure if the response is 5xx.\n                CircuitBreakerRule.onServerErrorStatus(),\n                // A success if the response is 2xx.\n                CircuitBreakerRule.builder()\n                                  .onStatusClass(HttpStatusClass.SUCCESS)\n                                  .thenSuccess(),\n                // Neither a success nor a failure. Do not take this response into account.\n                CircuitBreakerRule.builder().thenIgnore());\n`}</code></pre>\n    <p>{`If you need to determine whether the request was successful by looking into the response content,\nyou should build `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreakerRuleWithContent:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerRuleWithContent.html\"\n      }}>{`type://CircuitBreakerRuleWithContent`}</a>{` and specify it when you create an\n`}<a parentName=\"p\" {...{\n        \"href\": \"type://WebClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html\"\n      }}>{`type://WebClient`}</a>{` using `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreakerClientBuilder:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerClientBuilder.html\"\n      }}>{`type://CircuitBreakerClientBuilder`}</a>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.client.circuitbreaker.CircuitBreakerRuleWithContent;\n\nfinal CircuitBreakerRuleWithContent<HttpResponse> myRule =\n        CircuitBreakerRuleWithContent.of(\n                CircuitBreakerRuleWithContent.<HttpResponse>builder()\n                                             .onUnprocessed()\n                                             .thenIgnore(),\n                CircuitBreakerRuleWithContent.<HttpResponse>builder()\n                                             .onException()\n                                             .thenFailure(),\n                CircuitBreakerRuleWithContent.<HttpResponse>builder()\n                                             .onResponse(response -> response.aggregate().thenApply(content -> {\n                                                 return content.equals(\"Failure\");\n                                             }))\n                                             .thenFailure());\n\nWebClient client = WebClient\n        .builder(...)\n        .decorator(CircuitBreakerClient.builder(myRule) // Specify the rule\n                                       .newDecorator())\n        .build();\n\nAggregatedHttpResponse res = client.execute(...).aggregate().join();\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"grouping-circuitbreakers\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#grouping-circuitbreakers\",\n        \"aria-label\": \"grouping circuitbreakers permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Grouping `}<inlineCode parentName=\"h2\">{`CircuitBreaker`}</inlineCode>{`s`}</h2>\n    <p>{`In the very first example above, a single `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n      }}>{`type://CircuitBreaker`}</a>{` was used to track the events. However,\nin many cases, you will want to use different `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n      }}>{`type://CircuitBreaker`}</a>{` for different endpoints. For example, there\nmight be an API which performs heavy calculation which fails often. On the other hand, there can be another API\nwhich is not resource hungry and this is not likely to fail.\nHaving one `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n      }}>{`type://CircuitBreaker`}</a>{` that tracks all the success and failure does not make sense in this scenario.\nIt's even worse if the client connects to the services on different machines.\nWhen one of the remote services is down, your `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n      }}>{`type://CircuitBreaker`}</a>{` will probably be `}<inlineCode parentName=\"p\">{`OPEN`}</inlineCode>{` state although\nyou can connect to other services.\nTherefore, Armeria provides various ways that let users group the range of circuit breaker instances.`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Group by host: a single `}<a parentName=\"p\" {...{\n            \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n          }}>{`type://CircuitBreaker`}</a>{` is used for each remote host.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-java\"\n          }}>{`import com.linecorp.armeria.client.circuitbreaker.CircuitBreakerRpcClient;\nimport com.linecorp.armeria.common.RpcResponse;\n\nfinal CircuitBreakerRule httpRule = CircuitBreakerRule.builder()\n                                                      .onServerErrorStatus()\n                                                      .onException()\n                                                      .thenFailure();\nfinal CircuitBreakerRule rpcRule = CircuitBreakerRule.onException();\n\n// Create a CircuitBreaker with the key name\nfinal Function<String, CircuitBreaker> factory = key -> CircuitBreaker.of(\"my-cb-\" + key);\n\n// Create CircuitBreakers per host (a.com, b.com ...)\nCircuitBreakerClient.newPerHostDecorator(factory, httpRule);\nCircuitBreakerRpcClient.newPerHostDecorator(factory, rpcRule);\n// The names of the created CircuitBreaker: my-cb-a.com, my-cb-b.com, ...\n`}</code></pre>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Group by method: a single `}<a parentName=\"p\" {...{\n            \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n          }}>{`type://CircuitBreaker`}</a>{` is used for each method.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-java\"\n          }}>{`// Create CircuitBreakers per method\nCircuitBreakerClient.newPerMethodDecorator(factory, httpRule);\n// The names of the created CircuitBreaker: my-cb-GET, my-cb-POST, ...\n\nCircuitBreakerRpcClient.newPerMethodDecorator(factory, rpcRule);\n// The names of the created CircuitBreaker: my-cb-methodA, my-cb-methodB, ...\n`}</code></pre>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Group by host and method: a single `}<a parentName=\"p\" {...{\n            \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n          }}>{`type://CircuitBreaker`}</a>{` is used for each method and host combination.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-java\"\n          }}>{`// Create a CircuitBreaker with the host and method name\nfinal BiFunction<String, String, CircuitBreaker> factory =\n        (host, method) -> CircuitBreaker.of(\"my-cb-\" + host + '#' + method);\n// Create CircuitBreakers per host and method\nCircuitBreakerClient.newDecorator(CircuitBreakerMapping.perHostAndMethod(factory), httpRule);\n// The names of the created CircuitBreaker: my-cb-a.com#GET,\n// my-cb-a.com#POST, my-cb-b.com#GET, my-cb-b.com#POST, ...\n\nCircuitBreakerRpcClient.newDecorator(CircuitBreakerMapping.perHostAndMethod(factory), rpcRule);\n// The names of the created CircuitBreaker: my-cb-a.com#methodA,\n// my-cb-a.com#methodB, my-cb-b.com#methodA, my-cb-b.com#methodB, ...\n`}</code></pre>\n      </li>\n    </ul>\n    <h2 {...{\n      \"id\": \"circuitbreakerbuilder\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#circuitbreakerbuilder\",\n        \"aria-label\": \"circuitbreakerbuilder permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><inlineCode parentName=\"h2\">{`CircuitBreakerBuilder`}</inlineCode></h2>\n    <p>{`We have used static factory methods in `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n      }}>{`type://CircuitBreaker`}</a>{` interface to create a `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n      }}>{`type://CircuitBreaker`}</a>{` so far.\nIf you use `}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreakerBuilder:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerBuilder.html\"\n      }}>{`type://CircuitBreakerBuilder`}</a>{`, you can configure the parameters which decide\n`}<a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n      }}>{`type://CircuitBreaker`}</a>{`'s behavior. Here are the parameters:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`name`}</inlineCode>{`:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`The name of the `}<a parentName=\"li\" {...{\n              \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n            }}>{`type://CircuitBreaker`}</a>{`.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`failureRateThreshold`}</inlineCode>{`:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`The threshold that changes `}<a parentName=\"li\" {...{\n              \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n            }}>{`type://CircuitBreaker`}</a>{`'s state to `}<inlineCode parentName=\"li\">{`OPEN`}</inlineCode>{` when the number of failed\n`}<a parentName=\"li\" {...{\n              \"href\": \"typeplural://Request:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Request.html\"\n            }}>{`typeplural://Request`}</a>{` divided by the number of total `}<a parentName=\"li\" {...{\n              \"href\": \"typeplural://Request:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Request.html\"\n            }}>{`typeplural://Request`}</a>{` exceeds it.\nThe default value is `}<inlineCode parentName=\"li\">{`0.5`}</inlineCode>{`.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`minimumRequestThreshold`}</inlineCode>{`:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`The minimum number of `}<a parentName=\"li\" {...{\n              \"href\": \"typeplural://Request:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Request.html\"\n            }}>{`typeplural://Request`}</a>{` to detect failures. The default value is `}<inlineCode parentName=\"li\">{`10`}</inlineCode>{`.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`trialRequestInterval`}</inlineCode>{`:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`The duration that a `}<a parentName=\"li\" {...{\n              \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n            }}>{`type://CircuitBreaker`}</a>{` remains in `}<inlineCode parentName=\"li\">{`HALF_OPEN`}</inlineCode>{` state. All requests are blocked off\nresponding with `}<a parentName=\"li\" {...{\n              \"href\": \"type://FailFastException:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/FailFastException.html\"\n            }}>{`type://FailFastException`}</a>{` during this state. The default value is `}<inlineCode parentName=\"li\">{`3`}</inlineCode>{` seconds.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`circuitOpenWindow`}</inlineCode>{`:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`The duration that a `}<a parentName=\"li\" {...{\n              \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n            }}>{`type://CircuitBreaker`}</a>{` remains in `}<inlineCode parentName=\"li\">{`OPEN`}</inlineCode>{` state. All `}<a parentName=\"li\" {...{\n              \"href\": \"typeplural://Request:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Request.html\"\n            }}>{`typeplural://Request`}</a>{` are blocked\noff responding with `}<a parentName=\"li\" {...{\n              \"href\": \"type://FailFastException:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/FailFastException.html\"\n            }}>{`type://FailFastException`}</a>{` during this state. The default value is `}<inlineCode parentName=\"li\">{`10`}</inlineCode>{` seconds.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`counterSlidingWindow`}</inlineCode>{`:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`The duration of a sliding window that a `}<a parentName=\"li\" {...{\n              \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n            }}>{`type://CircuitBreaker`}</a>{` counts successful and failed\n`}<a parentName=\"li\" {...{\n              \"href\": \"typeplural://Request:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Request.html\"\n            }}>{`typeplural://Request`}</a>{` in it. The default value is `}<inlineCode parentName=\"li\">{`20`}</inlineCode>{` seconds.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`counterUpdateInterval`}</inlineCode>{`:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`The duration that a `}<a parentName=\"li\" {...{\n              \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n            }}>{`type://CircuitBreaker`}</a>{` stores events in a bucket. The default value is `}<inlineCode parentName=\"li\">{`1`}</inlineCode>{` second.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`listeners`}</inlineCode>{`:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`The listeners which are notified by a `}<a parentName=\"li\" {...{\n              \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n            }}>{`type://CircuitBreaker`}</a>{` when an event occurs. The events are one of\n`}<inlineCode parentName=\"li\">{`stateChanged`}</inlineCode>{`, `}<inlineCode parentName=\"li\">{`eventCountUpdated`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`requestRejected`}</inlineCode>{`. You can use\n`}<a parentName=\"li\" {...{\n              \"href\": \"type://MetricCollectingCircuitBreakerListener\"\n            }}>{`type://MetricCollectingCircuitBreakerListener`}</a>{` to export metrics:`}</li>\n        </ul>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-java\"\n          }}>{`import com.linecorp.armeria.client.circuitbreaker.MetricCollectingCircuitBreakerListener\n\nimport io.micrometer.core.instrument.Metrics;\n\nfinal MetricCollectingCircuitBreakerListener listener =\n        new MetricCollectingCircuitBreakerListener(Metrics.globalRegistry);\nfinal CircuitBreakerBuilder builder = CircuitBreaker.builder()\n                                                    .listener(listener);\n`}</code></pre>\n      </li>\n    </ul>\n    <h2 {...{\n      \"id\": \"using-circuitbreaker-with-non-armeria-client\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#using-circuitbreaker-with-non-armeria-client\",\n        \"aria-label\": \"using circuitbreaker with non armeria client permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Using `}<inlineCode parentName=\"h2\">{`CircuitBreaker`}</inlineCode>{` with non-Armeria client`}</h2>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n      }}>{`type://CircuitBreaker`}</a>{` API is designed to be framework-agnostic and thus can be used with any non-Armeria\nclients:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Create a `}<a parentName=\"li\" {...{\n          \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n        }}>{`type://CircuitBreaker`}</a>{`.`}</li>\n      <li parentName=\"ol\">{`Guard your client calls with `}<inlineCode parentName=\"li\">{`CircuitBreaker.canRequest()`}</inlineCode>{`.`}</li>\n      <li parentName=\"ol\">{`Update the state of `}<a parentName=\"li\" {...{\n          \"href\": \"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html\"\n        }}>{`type://CircuitBreaker`}</a>{` by calling `}<a parentName=\"li\" {...{\n          \"href\": \"type://CircuitBreaker#onSuccess():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html#onSuccess()\"\n        }}>{`type://CircuitBreaker#onSuccess()`}</a>{` or\n`}<a parentName=\"li\" {...{\n          \"href\": \"type://CircuitBreaker#onFailure():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html#onFailure()\"\n        }}>{`type://CircuitBreaker#onFailure()`}</a>{` depending on the outcome of the client call.`}</li>\n    </ol>\n    <p>{`For example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`private final CircuitBreaker cb = CircuitBreaker.of(\"some-client\");\nprivate final SomeClient client = ...;\n\npublic void sendRequestWithCircuitBreaker() {\n    if (!cb.canRequest()) {\n        throw new RuntimeException();\n    }\n\n    boolean success = false;\n    try {\n        success = client.sendRequest();\n    } finally {\n        if (success) {\n            cb.onSuccess();\n        } else {\n            cb.onFailure();\n        }\n    }\n}\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","import { RouteComponentProps } from '@reach/router';\nimport { graphql, useStaticQuery } from 'gatsby';\nimport React from 'react';\n\nimport docsIndex from '../pages/docs/toc.json';\nimport MdxLayout from './mdx';\n\ninterface DocsLayoutProps extends RouteComponentProps {\n  pageContext: any;\n  pageTitle: string;\n}\n\nconst DocsLayout: React.FC<DocsLayoutProps> = (props) => {\n  const {\n    allMdx: { nodes: candidateMdxNodes },\n  } = useStaticQuery(graphql`\n    query {\n      allMdx(filter: { fileAbsolutePath: { glob: \"**/src/pages/docs/**\" } }) {\n        nodes {\n          tableOfContents(maxDepth: 1)\n          excerpt(pruneLength: 256, truncate: true)\n          parent {\n            ... on File {\n              sourceInstanceName\n              name\n            }\n          }\n        }\n      }\n    }\n  `);\n\n  return (\n    <MdxLayout\n      {...props}\n      candidateMdxNodes={candidateMdxNodes}\n      index={docsIndex}\n      prefix=\"docs\"\n      pageTitleSuffix=\"Armeria documentation\"\n    />\n  );\n};\n\nexport default DocsLayout;\n"],"sourceRoot":""}